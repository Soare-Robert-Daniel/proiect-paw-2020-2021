<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />

    <title>Meme World</title>
    <meta name="description" content="Meme World" />
    <meta name="author" content="Soare Robert Daniel" />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@600&family=Roboto&family=Sansita+Swashed:wght@600&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/stil1.css" />

    <style>
      .auth {
        padding: 10px;
        margin-bottom: 10px;
        border: 1px solid black;
        border-radius: 5px;
      }

      .auth .field {
        width: 300px;
        margin-bottom: 5px;
      }

      .auth .field input {
        width: 100%;
        font-family: "IBM Plex Mono";
      }

      .auth form {
        border: 1px dotted black;
        padding: 5px;
      }
    </style>
  </head>

  <body>
    <div id="antet">
      <h1>Bun venit Ã®n lumea memeurilor</h1>
      <p>Cele mai bune meme-uri din toata galaxia.</p>
      <div>
        <button onclick='schimbaCuloare("main", "rgb(255, 255, 0)")'>
          Schimba culoarea
        </button>
      </div>
    </div>

    <nav class="menu-list">
      <ul>
        <li><a href="./index.html">Acasa</a></li>
        <li><a>|</a></li>
        <li><a href="./pagina1.html">Ce este un meme?</a></li>
        <li><a>|</a></li>
        <li><a href="./pagina2.html">Top Site-uri</a></li>
        <li><a>|</a></li>
        <li><a href="./logare.html">Autentificare</a></li>
        <li><a>|</a></li>
        <li><a href="./dashboard.html">Panou de control</a></li>
      </ul>
    </nav>

    <div id="main">
      <div id="cont">
        <div id="signup" class="auth">
          <h3>Creaza un cont</h3>
          <form onsubmit="event.preventDefault(); inregistrare();">
            <div class="field">
              <label>Nume utilizator</label>
              <input
                name="nume"
                type="text"
                placeholder="Adaugati un nume de utilizator"
              />
            </div>
            <div class="field">
              <label>Parola</label>
              <input
                name="parola"
                type="password"
                placeholder="Adaugati o parola"
              />
            </div>
            <button type="submit" onclick="inregistrare">Inregistrarea</button>
          </form>
        </div>
        <div id="login" class="auth">
          <h3>Intra in cont</h3>
          <form onsubmit="event.preventDefault(); autentificare();">
            <div class="field">
              <label>Nume utilizator</label>
              <input
                name="nume"
                type="text"
                placeholder="Introduceti un nume de utilizator"
              />
            </div>
            <div class="field">
              <label>Parola</label>
              <input
                name="parola"
                type="password"
                placeholder="Introduceti o parola"
              />
            </div>
            <button type="submit" onclick="autentificare">Autentificare</button>
          </form>
        </div>
      </div>
    </div>
    <footer>
      <p>Copyright FSA gr.1342b 2020-2021</p>
    </footer>
    <script src="./js/utilitati.js"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/crypto-js.min.js"
      integrity="sha512-nOQuvD9nKirvxDdvQ9OMqe2dgapbPB7vYAMrzJihw5m+aNcf0dX53m6YxM4LgA9u8e9eg9QX+/+mPu8kCNpV2A=="
      crossorigin="anonymous"
    ></script>
    <script>
      const storage = window.localStorage;

      function inregistrare() {
        const nume = document.querySelector('#signup input[name="nume"]').value;
        const parola = document.querySelector('#signup input[name="parola"]')
          .value;

        storage.setItem(
          nume,
          CryptoJS.SHA256(parola).toString(CryptoJS.enc.Base64)
        );
        utilizator = nume;

        alert("Ai fost inregistrat");

        console.log(
          nume,
          CryptoJS.SHA256(parola).toString(CryptoJS.enc.Base64)
        );
      }

      function autentificare(event) {
        const nume = document.querySelector('#login input[name="nume"]').value;
        const parola = document.querySelector('#login input[name="parola"]')
          .value;

        if (
          storage.getItem(nume) &&
          storage.getItem(nume) ===
            CryptoJS.SHA256(parola).toString(CryptoJS.enc.Base64)
        ) {
          alert("Bun venit " + nume);
        } else {
          alert("Date incorecte!");
        }
      }
    </script>
  </body>
</html>
